# عيادة نيو ريان للأسنان - نظام إدارة العملاء

## نظرة عامة

تم تطوير نظام شامل لإدارة طلبات العملاء في عيادة نيو ريان للأسنان يشمل:

- ✅ نموذج اتصال باللغة العربية مع قائمة منسدلة للخدمات
- ✅ تحويل تلقائي لواتساب مع بيانات العميل
- ✅ قاعدة بيانات PostgreSQL مع Prisma
- ✅ لوحة تحكم إدارية مع NextAuth
- ✅ تتبع حالة الرسائل المرسلة عبر واتساب

## الإعدادات المطلوبة

### 1. قاعدة البيانات

قم بإعداد قاعدة بيانات PostgreSQL وحدث ملف `.env`:

\`\`\`env
# Database
DATABASE_URL="postgresql://username:password@localhost:5432/alrayan_dental?schema=public"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here"

# WhatsApp
WHATSAPP_PHONE_NUMBER="+96566774402"
\`\`\`

### 2. تثبيت الحزم

\`\`\`bash
npm install
\`\`\`

### 3. إعداد قاعدة البيانات

\`\`\`bash
# إنشاء وتطبيق الجداول
npm run db:push

# إنشاء Prisma Client
npm run db:generate
\`\`\`

### 4. إنشاء مستخدم إداري

\`\`\`bash
npm run create-admin
\`\`\`

سيتم إنشاء مستخدم إداري بالبيانات التالية:
- البريد الإلكتروني: `admin@newrayan.com`
- كلمة المرور: `NewRayan2024!`

### 5. تشغيل الموقع

\`\`\`bash
npm run dev
\`\`\`

## الصفحات والمسارات

### للعملاء
- `/dental` - الصفحة الرئيسية مع نموذج الاتصال

### للإدارة
- `/admin/login` - صفحة تسجيل دخول الإدارة
- `/admin/dashboard` - لوحة التحكم الإدارية

## الخدمات المتاحة في النموذج

1. تبييض الأسنان
2. ابتسامة هوليوود
3. زراعة الأسنان
4. تقويم الأسنان
5. تركيبات الأسنان
6. طب أسنان الأطفال
7. علاج العصب
8. علاج اللثة
9. تنظيف الأسنان
10. استشارة عامة

## المميزات

### نموذج الاتصال
- تصميم متجاوب باللغة العربية
- التحقق من صحة البيانات
- قائمة منسدلة للخدمات
- حقل اختياري للرسائل الإضافية
- تحويل تلقائي لواتساب بعد الإرسال

### لوحة التحكم الإدارية
- عرض جميع طلبات العملاء
- إحصائيات سريعة (إجمالي الطلبات، المجاب عليها، في الانتظار)
- إمكانية الرد عبر واتساب مباشرة
- تتبع حالة الرسائل المرسلة
- تصفية وترتيب البيانات

### الأمان
- تشفير كلمات المرور
- جلسات آمنة مع NextAuth
- حماية صفحات الإدارة
- التحقق من الهوية في API

## قاعدة البيانات

### جدول المستخدمين (users)
- id: معرف فريد
- email: البريد الإلكتروني
- password: كلمة المرور المشفرة
- name: الاسم
- role: الدور (ADMIN)
- createdAt: تاريخ الإنشاء
- updatedAt: تاريخ التحديث

### جدول طلبات الاتصال (contact_submissions)
- id: معرف فريد
- name: اسم العميل
- phoneNumber: رقم الهاتف
- selectedService: الخدمة المطلوبة
- message: رسالة إضافية (اختياري)
- whatsappSent: هل تم الرد عبر واتساب
- whatsappSentAt: تاريخ الرد
- createdAt: تاريخ الإرسال
- updatedAt: تاريخ التحديث

## API Endpoints

### للعملاء
- `POST /api/contact` - إرسال طلب جديد
- `GET /api/contact` - عرض جميع الطلبات (للإدارة فقط)

### للإدارة
- `PATCH /api/contact/[id]/whatsapp` - تحديث حالة الرد عبر واتساب

## الاستخدام

### للعملاء
1. زيارة الصفحة `/dental`
2. ملء النموذج بالبيانات المطلوبة
3. اختيار الخدمة المطلوبة من القائمة المنسدلة
4. الضغط على "أرسل عبر واتساب"
5. التحويل التلقائي لواتساب مع البيانات

### للإدارة
1. تسجيل الدخول في `/admin/login`
2. عرض قائمة الطلبات في `/admin/dashboard`
3. الضغط على "رد عبر واتساب" للرد على العميل
4. تتبع حالة الرسائل المرسلة

## المتطلبات التقنية

- Node.js 18+
- PostgreSQL
- Next.js 15
- Prisma ORM
- NextAuth.js
- Tailwind CSS
- Framer Motion

## الدعم والصيانة

للحصول على الدعم التقني أو إضافة مميزات جديدة، يرجى التواصل مع فريق التطوير.
